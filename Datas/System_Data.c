/***************************************************************************************************
*FileName:
*Description:
*Author: xsx_kair
*Data:
***************************************************************************************************/

/***************************************************************************************************/
/******************************************Header List**********************************************/
/***************************************************************************************************/
#include	"System_Data.h"
#include	"MyTest_Data.h"
#include	"SystemSet_Data.h"

#include	"CRC16.h"

#include	<string.h>
/***************************************************************************************************/
/***************************************************************************************************/
/***************************************************************************************************/

static ItemData	S_ItemData;										//测试数据,用于纽康度生物实验室使用

static unsigned char S_TestStatus = 0;							//测试状态

static MyTime_Def GB_Time;											//系统时间

static float GB_EnTemperature = 0;

static PaiduiStatus paiduiModuleStatus = Connect_Ok;			//排队模块连接状态
/***************************************************************************************************/
/***************************************************************************************************/
/***************************************************************************************************/

/***************************************************************************************************/
/***************************************************************************************************/
/***************************************************************************************************/
/****************************************File Start*************************************************/
/***************************************************************************************************/
/***************************************************************************************************/

/*********************************************************************************************/
/*********************************************************************************************/
/*********************************************************************************************/
/*********************************************************************************************/
/*********************************************************************************************/


/*********************************************************************************************/
/*********************************************************************************************/
/*********************************************************************************************/
/*********************************************************************************************/
/*********************************************************************************************/
void * GetTestDataForLab(void)
{
	//从系统设置数据中获取测试时led的亮度值
	S_ItemData.ledLight = getTestLedLightIntensity(getGBSystemSetData());
	
	return &S_ItemData;
}

void SetTestStatusFlorLab(unsigned char status)
{
	S_TestStatus = status;
}

unsigned char GetTestStatusFlorLab(void)
{
	return S_TestStatus;
}

/*********************************************************************************************/
/*********************************************************************************************/
/*********************************************************************************************/
/*********************************************************************************************/
/*********************************************************************************************/

void GetGB_Time(MyTime_Def * time)
{
	vTaskSuspendAll();
	memcpy(time, &GB_Time, sizeof(MyTime_Def));
	if(time->month == 0 || time->day == 0)
	{
		time->year = 0;
		time->month = 1;
		time->day = 1;
		time->hour = 0;
		time->min = 0;
		time->sec = 0;
	}
	xTaskResumeAll();
}

void SetGB_Time(MyTime_Def * time)
{	
	vTaskSuspendAll();
	memcpy(&GB_Time, time, sizeof(MyTime_Def));
	xTaskResumeAll();
}

/*********************************************************************************************/
/*********************************************************************************************/
/*********************************************************************************************/
/*********************************************************************************************/
/*********************************************************************************************/

float GetGB_EnTemperature(void)
{
	return GB_EnTemperature;
}

void SetGB_EnTemperature(float temp)
{	
	GB_EnTemperature = temp;
}

/***************************************************************************************************
*FunctionName: setPaiduiModuleStatus,  getPaiduiModuleStatus
*Description:  排队模块连接状态
*Input:  
*Output:  
*Return:  
*Author:  xsx
*Date: 2017年3月27日 09:15:40
***************************************************************************************************/
void setPaiduiModuleStatus(PaiduiStatus paiduiStatus)
{
	paiduiModuleStatus = paiduiStatus;
}
PaiduiStatus getPaiduiModuleStatus(void)
{
	return paiduiModuleStatus;
}




/****************************************end of file************************************************/
